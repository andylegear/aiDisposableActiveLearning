<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
  <title>DSQI Module Coordinator Review Portal</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <!-- Custom Styles -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ════════════════════════════════════════════════════════
       Main App Container — Alpine.js
       ════════════════════════════════════════════════════════ -->
  <div x-data="surveyApp()" x-init="init()" x-cloak>

    <!-- ── Progress Bar ─────────────────────────────────────── -->
    <div class="progress-bar-container" x-show="step < 8">
      <div class="progress-track">
        <div class="progress-fill" :style="'width:' + progressPercent + '%'"></div>
      </div>
      <div class="progress-label" x-text="progressText"></div>
    </div>

    <!-- ── Main Content ─────────────────────────────────────── -->
    <div class="max-w-3xl mx-auto px-4 py-8">

      <!-- ── Error Banner ─────────────────────────────────── -->
      <div x-show="errors.length > 0" class="error-banner bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
        <div class="flex items-center gap-2 text-red-700 font-semibold mb-2">
          <i class="fa-solid fa-circle-exclamation"></i>
          <span>Please fix the following before continuing:</span>
        </div>
        <ul class="text-red-600 text-sm list-disc list-inside space-y-1">
          <template x-for="err in errors" :key="err">
            <li x-text="err"></li>
          </template>
        </ul>
      </div>

      <!-- ══════════════════════════════════════════════════════
           STEP 0 — Welcome
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 0" class="step-section">
        <div class="survey-card text-center">
          <div class="mb-6">
            <i class="fa-solid fa-graduation-cap text-5xl text-indigo-500 mb-4"></i>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">DSQI Module Coordinator Review Portal</h1>
            <p class="text-gray-500 text-lg">AI-Generated Disposable Software as Active Learning Instruments in CS Education</p>
          </div>

          <div class="text-left max-w-xl mx-auto space-y-4 text-gray-600 mb-8">
            <p>
              Thank you for participating in this pedagogical utility evaluation. This research explores
              <strong>AI-generated "disposable software"</strong> — bespoke, single-purpose tools created
              on-demand by educators to serve specific, immediate pedagogical needs.
            </p>
            <p>
              You will evaluate <strong>one software artifact</strong> designed specifically for your module.
              The questionnaire covers pedagogical alignment, cognitive engagement, and your adoption intention.
            </p>
            <div class="bg-indigo-50 border border-indigo-100 rounded-lg p-4">
              <div class="flex items-center gap-2 text-indigo-700 font-semibold mb-1">
                <i class="fa-solid fa-clock"></i>
                <span>Estimated time: ~10 minutes</span>
              </div>
              <p class="text-sm text-indigo-600">
                Approximately 5 minutes exploring the artifact + 5 minutes answering 8 questions.
              </p>
            </div>
            <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-500">
              <i class="fa-solid fa-shield-halved mr-1"></i>
              <strong>Ethics note:</strong> Your responses are anonymous and used for academic research only.
              You may withdraw at any time by closing this page.
            </div>
          </div>

          <button @click="next()" class="btn-primary text-lg">
            <i class="fa-solid fa-play"></i> Begin Review
          </button>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 1 — Coordinator Info + Artifact Selection
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 1" class="step-section">
        <div class="survey-card">
          <div class="section-header">
            <i class="fa-solid fa-user-pen"></i>
            <span>Coordinator Information</span>
          </div>

          <div class="space-y-5">
            <!-- Name -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-1">
                Full Name <span class="required-star">*</span>
              </label>
              <input type="text" x-model="coordinator.name" class="survey-input"
                     :class="{'field-error': errors.length && !coordinator.name.trim()}"
                     placeholder="Dr. Jane Smith">
            </div>

            <!-- Email -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-1">
                Email Address <span class="required-star">*</span>
              </label>
              <input type="email" x-model="coordinator.email" class="survey-input"
                     :class="{'field-error': errors.length && !coordinator.email.trim()}"
                     placeholder="jane.smith@ul.ie">
            </div>

            <!-- Department -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-1">
                Department <span class="required-star">*</span>
              </label>
              <input type="text" x-model="coordinator.department" class="survey-input"
                     :class="{'field-error': errors.length && !coordinator.department.trim()}"
                     placeholder="CSIS, University of Limerick">
            </div>

            <!-- Artifact / Module Selection -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-1">
                Module &amp; Artifact <span class="required-star">*</span>
              </label>

              <!-- Pre-selected (locked) via URL param -->
              <template x-if="artifactLocked && selectedArtifact">
                <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                  <div class="flex items-center gap-2">
                    <i class="fa-solid fa-lock text-indigo-400"></i>
                    <span class="font-semibold text-indigo-700" x-text="selectedArtifact.module + ' — ' + selectedArtifact.name"></span>
                  </div>
                  <p class="text-sm text-indigo-500 mt-1" x-text="selectedArtifact.moduleName"></p>
                </div>
              </template>

              <!-- Dropdown selection -->
              <template x-if="!artifactLocked">
                <select x-model="selectedArtifactId" class="survey-select"
                        :class="{'field-error': errors.length && !selectedArtifactId}">
                  <option value="">— Select your module —</option>
                  <template x-for="a in artifacts" :key="a.id">
                    <option :value="a.id" x-text="a.module + ' — ' + a.name + ' (' + a.moduleName + ')'"></option>
                  </template>
                </select>
              </template>
            </div>
          </div>

          <div class="flex justify-between mt-8">
            <button @click="prev()" class="btn-secondary">
              <i class="fa-solid fa-arrow-left"></i> Back
            </button>
            <button @click="next()" class="btn-primary">
              Next <i class="fa-solid fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 2 — Explore Artifact
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 2" class="step-section">
        <div class="survey-card" x-show="selectedArtifact">
          <div class="text-center mb-6">
            <span class="artifact-badge mb-3">
              <i class="fa-solid fa-cube"></i>
              <span x-text="selectedArtifact?.module"></span>
            </span>
            <h2 class="text-2xl font-bold text-gray-800 mt-3" x-text="selectedArtifact?.name"></h2>
            <p class="text-gray-500 mt-1" x-text="selectedArtifact?.moduleName"></p>
          </div>

          <div class="bg-gray-50 rounded-lg p-5 mb-6">
            <p class="text-gray-600 mb-3" x-text="selectedArtifact?.description"></p>
            <div class="bg-indigo-50 border border-indigo-100 rounded-lg p-4">
              <div class="flex items-center gap-2 text-indigo-700 font-semibold mb-1">
                <i class="fa-solid fa-bullseye"></i>
                <span>Learning Objective</span>
              </div>
              <p class="text-indigo-600 text-sm" x-text="selectedArtifact?.learningObjective"></p>
            </div>
          </div>

          <div class="flex flex-col sm:flex-row gap-3 mb-6">
            <a :href="selectedArtifact?.liveUrl" target="_blank" rel="noopener" class="btn-artifact flex-1 justify-center">
              <i class="fa-solid fa-rocket"></i> Open Live Artifact
            </a>
            <a :href="selectedArtifact?.repoUrl" target="_blank" rel="noopener" class="btn-secondary flex-1 justify-center">
              <i class="fa-solid fa-code"></i> View Source Code
            </a>
          </div>

          <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
            <div class="flex items-center gap-2 text-amber-700 font-semibold mb-1">
              <i class="fa-solid fa-lightbulb"></i>
              <span>Instructions</span>
            </div>
            <p class="text-amber-700 text-sm">
              Please spend <strong>around 5 minutes</strong> using the artifact. Get a good feel for the tool —
              you don't need to complete every level, just enough to form a clear assessment from the perspective
              of your module.
            </p>
          </div>

          <div class="flex justify-between">
            <button @click="prev()" class="btn-secondary">
              <i class="fa-solid fa-arrow-left"></i> Back
            </button>
            <button @click="next()" class="btn-primary">
              I've reviewed this artifact — Continue to Questions <i class="fa-solid fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 3 — Part 1: Pedagogical Alignment (Q1-Q3)
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 3" class="step-section">
        <div class="survey-card">
          <div class="section-header">
            <i class="fa-solid fa-graduation-cap"></i>
            <span>Part 1: Pedagogical Alignment</span>
          </div>
          <p class="text-gray-500 text-sm mb-6">
            Rate each statement on a 5-point scale. All three questions are required.
            <span class="required-star">*</span>
          </p>

          <!-- Q1 -->
          <div class="mb-8">
            <p class="text-gray-700 font-semibold mb-1">
              <span class="text-indigo-500 font-bold">Q1.</span>
              <span x-text="p1Scales.Q1.label"></span>
            </p>
            <p class="text-gray-400 text-xs mb-3">Select a rating <span class="required-star">*</span></p>
            <div class="likert-group">
              <template x-for="n in 5" :key="'q1-'+n">
                <label class="likert-option"
                       :class="{'selected': p1.Q1 === n, 'field-error': errors.length && !p1.Q1}"
                       @click="p1.Q1 = n">
                  <span class="likert-number" x-text="n"></span>
                  <span class="likert-label" x-text="p1Scales.Q1.anchors[n]"></span>
                </label>
              </template>
            </div>
          </div>

          <!-- Q2 -->
          <div class="mb-8">
            <p class="text-gray-700 font-semibold mb-1">
              <span class="text-indigo-500 font-bold">Q2.</span>
              <span x-text="p1Scales.Q2.label"></span>
            </p>
            <p class="text-gray-400 text-xs mb-3">Select a rating <span class="required-star">*</span></p>
            <div class="likert-group">
              <template x-for="n in 5" :key="'q2-'+n">
                <label class="likert-option"
                       :class="{'selected': p1.Q2 === n, 'field-error': errors.length && !p1.Q2}"
                       @click="p1.Q2 = n">
                  <span class="likert-number" x-text="n"></span>
                  <span class="likert-label" x-text="p1Scales.Q2.anchors[n]"></span>
                </label>
              </template>
            </div>
          </div>

          <!-- Q3 -->
          <div class="mb-8">
            <p class="text-gray-700 font-semibold mb-1">
              <span class="text-indigo-500 font-bold">Q3.</span>
              <span x-text="p1Scales.Q3.label"></span>
            </p>
            <p class="text-gray-400 text-xs mb-3">Select a rating <span class="required-star">*</span></p>
            <div class="likert-group">
              <template x-for="n in 5" :key="'q3-'+n">
                <label class="likert-option"
                       :class="{'selected': p1.Q3 === n, 'field-error': errors.length && !p1.Q3}"
                       @click="p1.Q3 = n">
                  <span class="likert-number" x-text="n"></span>
                  <span class="likert-label" x-text="p1Scales.Q3.anchors[n]"></span>
                </label>
              </template>
            </div>
          </div>

          <div class="flex justify-between">
            <button @click="prev()" class="btn-secondary">
              <i class="fa-solid fa-arrow-left"></i> Back
            </button>
            <button @click="next()" class="btn-primary">
              Next <i class="fa-solid fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 4 — Part 2: ICAP Framework (Q4)
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 4" class="step-section">
        <div class="survey-card">
          <div class="section-header">
            <i class="fa-solid fa-brain"></i>
            <span>Part 2: Cognitive Engagement — ICAP Framework</span>
          </div>

          <p class="text-gray-500 text-sm mb-4">
            The ICAP framework classifies student engagement into four modes. Review the reference table below,
            then select the mode that best describes how a student would primarily engage with this artifact.
          </p>

          <!-- ICAP Reference Table -->
          <table class="icap-table mb-6">
            <thead>
              <tr>
                <th>Mode</th>
                <th>Description</th>
                <th>Example Student Action</th>
              </tr>
            </thead>
            <tbody>
              <template x-for="level in icapLevels" :key="level.value">
                <tr>
                  <td class="font-semibold text-gray-700" x-text="level.label"></td>
                  <td x-text="level.description"></td>
                  <td class="italic" x-text="level.example"></td>
                </tr>
              </template>
            </tbody>
          </table>

          <p class="text-gray-700 font-semibold mb-1">
            <span class="text-indigo-500 font-bold">Q4.</span>
            Which ICAP mode best describes the primary way a student would engage with this artifact?
            <span class="required-star">*</span>
          </p>
          <p class="text-gray-400 text-xs mb-3">Select one mode</p>

          <div class="icap-group mb-4">
            <template x-for="level in icapLevels" :key="level.value">
              <label class="icap-option"
                     :class="{'selected': icap.Q4 === level.value, 'field-error': errors.length && !icap.Q4}"
                     @click="icap.Q4 = level.value">
                <span class="icap-level" x-text="level.label"></span>
                <span class="icap-desc" x-text="level.description"></span>
                <span class="icap-example" x-text="'e.g. ' + level.example"></span>
              </label>
            </template>
          </div>

          <div class="flex justify-between mt-6">
            <button @click="prev()" class="btn-secondary">
              <i class="fa-solid fa-arrow-left"></i> Back
            </button>
            <button @click="next()" class="btn-primary">
              Next <i class="fa-solid fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 5 — Part 3: Adoption Intention (Q5-Q6)
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 5" class="step-section">
        <div class="survey-card">
          <div class="section-header">
            <i class="fa-solid fa-clipboard-list"></i>
            <span>Part 3: Adoption Intention</span>
          </div>
          <p class="text-gray-500 text-sm mb-6">
            Rate each statement on a 5-point scale. Both questions are required.
            <span class="required-star">*</span>
          </p>

          <!-- Q5 -->
          <div class="mb-8">
            <p class="text-gray-700 font-semibold mb-1">
              <span class="text-indigo-500 font-bold">Q5.</span>
              <span x-text="adoptionScales.Q5.label"></span>
            </p>
            <p class="text-gray-400 text-xs mb-3">Select a rating <span class="required-star">*</span></p>
            <div class="likert-group">
              <template x-for="n in 5" :key="'q5-'+n">
                <label class="likert-option"
                       :class="{'selected': adoption.Q5 === n, 'field-error': errors.length && !adoption.Q5}"
                       @click="adoption.Q5 = n">
                  <span class="likert-number" x-text="n"></span>
                  <span class="likert-label" x-text="adoptionScales.Q5.anchors[n]"></span>
                </label>
              </template>
            </div>
          </div>

          <!-- Q6 -->
          <div class="mb-8">
            <p class="text-gray-700 font-semibold mb-1">
              <span class="text-indigo-500 font-bold">Q6.</span>
              <span x-text="adoptionScales.Q6.label"></span>
            </p>
            <p class="text-gray-400 text-xs mb-3">Select a rating <span class="required-star">*</span></p>
            <div class="likert-group">
              <template x-for="n in 5" :key="'q6-'+n">
                <label class="likert-option"
                       :class="{'selected': adoption.Q6 === n, 'field-error': errors.length && !adoption.Q6}"
                       @click="adoption.Q6 = n">
                  <span class="likert-number" x-text="n"></span>
                  <span class="likert-label" x-text="adoptionScales.Q6.anchors[n]"></span>
                </label>
              </template>
            </div>
          </div>

          <div class="flex justify-between">
            <button @click="prev()" class="btn-secondary">
              <i class="fa-solid fa-arrow-left"></i> Back
            </button>
            <button @click="next()" class="btn-primary">
              Next <i class="fa-solid fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 6 — Part 4: Open-Ended Feedback (Q7-Q8)
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 6" class="step-section">
        <div class="survey-card">
          <div class="section-header">
            <i class="fa-solid fa-comments"></i>
            <span>Part 4: Open-Ended Feedback</span>
          </div>

          <div class="space-y-6">
            <!-- Q7 -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-1">
                <span class="text-indigo-500 font-bold">Q7.</span>
                What is the most significant potential <strong class="text-green-600">benefit</strong>
                of using this artifact in your module?
                <span class="required-star">*</span>
              </label>
              <textarea x-model="openEnded.Q7"
                        class="survey-textarea"
                        :class="{'field-error': errors.length && !openEnded.Q7.trim()}"
                        placeholder="The most significant benefit of using this artifact in my module would be..."></textarea>
            </div>

            <!-- Q8 -->
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-1">
                <span class="text-indigo-500 font-bold">Q8.</span>
                What is the most significant potential <strong class="text-red-600">drawback or barrier</strong>
                to using this artifact in your module?
                <span class="required-star">*</span>
              </label>
              <textarea x-model="openEnded.Q8"
                        class="survey-textarea"
                        :class="{'field-error': errors.length && !openEnded.Q8.trim()}"
                        placeholder="The most significant drawback or barrier would be..."></textarea>
            </div>
          </div>

          <div class="flex justify-between mt-8">
            <button @click="prev()" class="btn-secondary">
              <i class="fa-solid fa-arrow-left"></i> Back
            </button>
            <button @click="next()" class="btn-primary">
              Review Summary <i class="fa-solid fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 7 — Summary
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 7" class="step-section">
        <div class="survey-card">
          <div class="section-header">
            <i class="fa-solid fa-clipboard-check"></i>
            <span>Review Summary</span>
          </div>
          <p class="text-gray-500 text-sm mb-6">
            Please review your responses below before submitting. You can go back to edit any section.
          </p>

          <!-- Coordinator Info + Artifact -->
          <div class="summary-section">
            <div class="flex items-center justify-between flex-wrap gap-2 mb-2">
              <h3 class="font-semibold text-gray-700">
                <i class="fa-solid fa-user mr-1 text-indigo-500"></i> Coordinator &amp; Artifact
              </h3>
              <button @click="goToStep(1)" class="text-indigo-500 hover:text-indigo-700 text-sm font-semibold">
                <i class="fa-solid fa-pen"></i> Edit
              </button>
            </div>
            <div class="text-sm text-gray-600 space-y-1">
              <p><strong>Name:</strong> <span x-text="coordinator.name"></span></p>
              <p><strong>Email:</strong> <span x-text="coordinator.email"></span></p>
              <p><strong>Department:</strong> <span x-text="coordinator.department"></span></p>
              <p><strong>Artifact:</strong>
                <span x-text="selectedArtifact ? selectedArtifact.module + ' — ' + selectedArtifact.name : '—'"></span>
              </p>
            </div>
          </div>

          <!-- P1: Pedagogical Alignment -->
          <div class="summary-section">
            <div class="flex items-center justify-between flex-wrap gap-2 mb-2">
              <h3 class="font-semibold text-gray-700">
                <i class="fa-solid fa-graduation-cap mr-1 text-indigo-500"></i> Part 1: Pedagogical Alignment
              </h3>
              <button @click="goToStep(3)" class="text-indigo-500 hover:text-indigo-700 text-sm font-semibold">
                <i class="fa-solid fa-pen"></i> Edit
              </button>
            </div>
            <div class="summary-grid">
              <div class="summary-metric">
                <div class="metric-label">Q1 Relevance</div>
                <div class="metric-value" x-text="p1.Q1 || '—'"></div>
              </div>
              <div class="summary-metric">
                <div class="metric-label">Q2 Challenge</div>
                <div class="metric-value" x-text="p1.Q2 || '—'"></div>
              </div>
              <div class="summary-metric">
                <div class="metric-label">Q3 Coverage</div>
                <div class="metric-value" x-text="p1.Q3 || '—'"></div>
              </div>
              <div class="summary-metric">
                <div class="metric-label">P₁ Average</div>
                <div class="metric-value" x-text="p1Average ? p1Average.toFixed(2) : '—'"></div>
              </div>
            </div>
          </div>

          <!-- ICAP -->
          <div class="summary-section">
            <div class="flex items-center justify-between flex-wrap gap-2 mb-2">
              <h3 class="font-semibold text-gray-700">
                <i class="fa-solid fa-brain mr-1 text-indigo-500"></i> Part 2: ICAP
              </h3>
              <button @click="goToStep(4)" class="text-indigo-500 hover:text-indigo-700 text-sm font-semibold">
                <i class="fa-solid fa-pen"></i> Edit
              </button>
            </div>
            <div class="summary-grid">
              <div class="summary-metric">
                <div class="metric-label">Q4 Engagement Mode</div>
                <div class="metric-value" x-text="icapLabel(icap.Q4)"></div>
              </div>
            </div>
          </div>

          <!-- Adoption -->
          <div class="summary-section">
            <div class="flex items-center justify-between flex-wrap gap-2 mb-2">
              <h3 class="font-semibold text-gray-700">
                <i class="fa-solid fa-clipboard-list mr-1 text-indigo-500"></i> Part 3: Adoption Intention
              </h3>
              <button @click="goToStep(5)" class="text-indigo-500 hover:text-indigo-700 text-sm font-semibold">
                <i class="fa-solid fa-pen"></i> Edit
              </button>
            </div>
            <div class="summary-grid">
              <div class="summary-metric">
                <div class="metric-label">Q5 Integration</div>
                <div class="metric-value" x-text="adoption.Q5 || '—'"></div>
              </div>
              <div class="summary-metric">
                <div class="metric-label">Q6 Likelihood</div>
                <div class="metric-value" x-text="adoption.Q6 || '—'"></div>
              </div>
            </div>
          </div>

          <!-- Open-Ended -->
          <div class="summary-section">
            <div class="flex items-center justify-between flex-wrap gap-2 mb-2">
              <h3 class="font-semibold text-gray-700">
                <i class="fa-solid fa-comments mr-1 text-indigo-500"></i> Part 4: Open-Ended
              </h3>
              <button @click="goToStep(6)" class="text-indigo-500 hover:text-indigo-700 text-sm font-semibold">
                <i class="fa-solid fa-pen"></i> Edit
              </button>
            </div>
            <div class="summary-grid" style="grid-template-columns: 1fr 1fr;">
              <div class="summary-metric">
                <div class="metric-label">Q7 Benefit</div>
                <div class="metric-value text-sm" x-text="truncate(openEnded.Q7, 50)"></div>
              </div>
              <div class="summary-metric">
                <div class="metric-label">Q8 Drawback</div>
                <div class="metric-value text-sm" x-text="truncate(openEnded.Q8, 50)"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex justify-between mb-8">
          <button @click="prev()" class="btn-secondary">
            <i class="fa-solid fa-arrow-left"></i> Back
          </button>
          <button @click="submit()" class="btn-success text-lg">
            <i class="fa-solid fa-paper-plane"></i> Submit Review
          </button>
        </div>
      </section>

      <!-- ══════════════════════════════════════════════════════
           STEP 8 — Thank You
           ══════════════════════════════════════════════════════ -->
      <section x-show="step === 8" class="step-section">
        <div class="survey-card text-center">
          <i class="fa-solid fa-circle-check text-6xl text-green-500 mb-4"></i>
          <h2 class="text-2xl font-bold text-gray-800 mb-2">Thank You!</h2>
          <p class="text-gray-600 mb-6">
            Your coordinator review has been recorded successfully.
          </p>
          <div class="bg-green-50 border border-green-200 rounded-lg p-4 max-w-md mx-auto mb-6">
            <div class="text-green-700 text-sm space-y-2">
              <p>
                <i class="fa-solid fa-download mr-1"></i>
                <strong>JSON file downloaded</strong> — please check your downloads folder.
              </p>
              <p>
                <i class="fa-solid fa-envelope mr-1"></i>
                <strong>Email client opened</strong> — please attach the JSON file and send.
              </p>
            </div>
          </div>
          <p class="text-gray-400 text-sm">
            If the email client did not open, please send the downloaded JSON file manually to
            <a href="mailto:andrew.p.legear@ul.ie" class="text-indigo-500 font-semibold">andrew.p.legear@ul.ie</a>.
          </p>

          <div class="mt-6">
            <button @click="downloadJSON()" class="btn-secondary">
              <i class="fa-solid fa-download"></i> Download JSON Again
            </button>
          </div>
        </div>
      </section>

    </div><!-- /max-w-3xl -->
  </div><!-- /x-data -->

  <!-- ── Scripts (order matters) ──────────────────────────── -->
  <script src="survey-data.js"></script>
  <script src="survey.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js"></script>

  <style>[x-cloak] { display: none !important; }</style>
</body>
</html>
